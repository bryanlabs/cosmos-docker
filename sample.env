# THORChain Docker Environment Configuration
# Copy this file to .env and customize as needed

# Docker Compose Configuration
COMPOSE_FILE=thorchain.yml

# Node Configuration
MONIKER=thorchain-rpc-node
NETWORK=thorchain-1

# THORNode Version
THORNODE_VERSION=v3.6.1
THORNODE_REPO=https://gitlab.com/thorchain/thornode
EXTRA_FLAGS=--grpc.address=0.0.0.0:9090
FORCE_REBUILD=false

# Snapshot for faster sync (optional)
# Get latest from: https://snapshots.ninerealms.com/snapshots?prefix=thornode
SNAPSHOT=
SNAPSHOT_API_URL=https://snapshots.ninerealms.com/snapshots?prefix=thornode
SNAPSHOT_BASE_URL=https://snapshots.ninerealms.com/snapshots/thornode/

# Network Configuration
SEEDS=c3613862c2608b3e861406ad02146f41cf5124e6@statesync-seed.ninerealms.com:27146,dbd1730bff1e8a21aad93bc6083209904d483185@statesync-seed-2.ninerealms.com:27146
PERSISTENT_PEERS=55f9b1240155509ddce13e01254b6e8624266b63@23.105.164.137:27146,44aed6715bb6a294eec340daa0dfedc230884ab3@23.105.164.182:27146,9cd6294d6dc23e1e13079ae44f11bc56a1170d4b@38.76.0.228:27146,c60a59bb69ff195148a9fd0528ee055f5b936be9@38.76.0.232:27146,949e532a05c028b25228a24fba831246912b7983@38.76.0.233:27146,af54ec0412ba68f6ceaaf0e270a090d5a310785f@38.76.0.229:27146,14d848ee14dc5dc5b73d748d93794baa475c1564@38.76.0.230:27146
GENESIS_URL=https://storage.googleapis.com/public-snapshots-ninerealms/genesis/17562000.json

# P2P Configuration
MAX_INBOUND_PEERS=40
MAX_OUTBOUND_PEERS=10
P2P_PEX=true
P2P_ADDR_BOOK_STRICT=false
P2P_FLUSH_THROTTLE_TIMEOUT=100ms
P2P_DIAL_TIMEOUT=3s
P2P_HANDSHAKE_TIMEOUT=20s
P2P_ALLOW_DUPLICATE_IP=true
PRIVATE_PEER_IDS=

# Node Configuration
FAST_SYNC=true
LOG_FORMAT=json
PROXY_APP=tcp://127.0.0.1:26658

# RPC Configuration
RPC_CORS_ALLOWED_ORIGINS=["*"]
RPC_MAX_OPEN_CONNECTIONS=900
RPC_GRPC_MAX_OPEN_CONNECTIONS=900

# State Sync Configuration  
STATESYNC_ENABLE=false
STATESYNC_RPC_SERVERS=https://rpc-v2.ninerealms.com:443,https://rpc-v2.ninerealms.com:443
STATESYNC_TRUST_PERIOD=360h0m0s
STATESYNC_TRUST_HEIGHT=0
STATESYNC_TRUST_HASH=
STATESYNC_DISCOVERY_TIME=15s
STATESYNC_CHUNK_REQUEST_TIMEOUT=10s
STATESYNC_CHUNK_FETCHERS=4

# Consensus Configuration
CONSENSUS_TIMEOUT_COMMIT=5s
CONSENSUS_CREATE_EMPTY_BLOCKS=true
CONSENSUS_TIMEOUT_PROPOSE=3s
CONSENSUS_TIMEOUT_PROPOSE_DELTA=500ms
CONSENSUS_TIMEOUT_PREVOTE=1s
CONSENSUS_TIMEOUT_PREVOTE_DELTA=500ms
CONSENSUS_TIMEOUT_PRECOMMIT=1s
CONSENSUS_TIMEOUT_PRECOMMIT_DELTA=500ms
CONSENSUS_SKIP_TIMEOUT_COMMIT=false
CONSENSUS_CREATE_EMPTY_BLOCKS_INTERVAL=0s
CONSENSUS_PEER_GOSSIP_SLEEP_DURATION=100ms
CONSENSUS_PEER_QUERY_MAJ23_SLEEP_DURATION=2s
CONSENSUS_DOUBLE_SIGN_CHECK_HEIGHT=0

# Mempool Configuration
MEMPOOL_SIZE=5000
MEMPOOL_CACHE_SIZE=10000
MEMPOOL_RECHECK=true
MEMPOOL_BROADCAST=true
MEMPOOL_MAX_TXS_BYTES=1073741824
MEMPOOL_MAX_TX_BYTES=1048576
MEMPOOL_MAX_BATCH_BYTES=0
MEMPOOL_KEEP_INVALID_TXS=false

# Additional P2P Configuration
P2P_SEND_RATE=5120000
P2P_RECV_RATE=5120000
P2P_MAX_PACKET_MSG_PAYLOAD_SIZE=1024
P2P_SEED_MODE=false
P2P_UNCONDITIONAL_PEER_IDS=
P2P_PERSISTENT_PEERS_MAX_DIAL_PERIOD=0s

# Additional RPC Configuration
RPC_CORS_ALLOWED_METHODS=["HEAD", "GET", "POST"]
RPC_CORS_ALLOWED_HEADERS=["Origin", "Accept", "Content-Type", "X-Requested-With", "X-Server-Time"]
RPC_UNSAFE=false
RPC_MAX_SUBSCRIPTION_CLIENTS=100
RPC_MAX_SUBSCRIPTIONS_PER_CLIENT=5
RPC_EXPERIMENTAL_SUBSCRIPTION_BUFFER_SIZE=200
RPC_EXPERIMENTAL_WEBSOCKET_WRITE_BUFFER_SIZE=200
RPC_EXPERIMENTAL_CLOSE_ON_SLOW_CLIENT=false
RPC_TIMEOUT_BROADCAST_TX_COMMIT=10s
RPC_MAX_BODY_BYTES=1000000
RPC_MAX_HEADER_BYTES=1048576

# Instrumentation Configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_NAMESPACE=tendermint
PROMETHEUS_LISTEN_ADDR=:26660
PROMETHEUS_MAX_OPEN_CONNECTIONS=3

# FastSync Configuration
FASTSYNC_VERSION=v0

# TX Index Configuration
TX_INDEX_INDEXER=kv

# Basic Node Configuration
DB_BACKEND=goleveldb
DB_DIR=data
ABCI=socket
FILTER_PEERS=false

# External IP Configuration
# Set to 'auto' to automatically detect external IP using ifconfig.me
# Or set to a specific IP address (e.g., 1.2.3.4:26656)
EXTERNAL_ADDRESS=auto

# Standard Cosmos ports for your node (recommended)
RPC_PORT=26657
P2P_PORT=26656
GRPC_PORT=9090
GRPC_WEB_PORT=9091
REST_PORT=1317

# Internal Configuration
THORNODE_HOST=http://thorchain:26657

# Reverse Proxy Configuration (for production with Traefik)
DOMAIN=example.com
RPC_HOST=thorchain
RPC_LB=thorchain-lb
REST_HOST=thorchain-api
REST_LB=thorchain-api-lb
GRPC_HOST=thorchain-grpc
GRPC_LB=thorchain-grpc-lb

# External Docker Network
DOCKER_EXT_NETWORK=traefik_default

# Monitoring Configuration
MONITORING_PORT=8080
MONITORING_RPC_ENDPOINT=
MONITORING_NODE=

# Logging Level
LOG_LEVEL=info

# Script Version (optional)
SCRIPT_TAG=

# Environment Version (do not modify)
ENV_VERSION=1
